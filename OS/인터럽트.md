## 인터럽트(interrupt)

### 인터럽트란?
* CPU에게 어떤 사건이 발생했음을 알리는 것
* CPU가 처리할 인터럽트는 정해져 있다(수십~수백개)

---
### 인터럽트의 유형
#### 하드웨어 인터럽트
* 입출력 장치에서 입출력의 종료를 알림
* 타이머 장치에서 주기적으로 알림
#### 소프트웨어 인터럽트(트랩 : trap)
* 프로그램 오류 : 0으로 나누기, 잘못된 주소 참조 등
* 사용자(프로그램)의 서비스 요청 : 시스템 호출(System call)

---
### 인터럽트 발생
* **인터럽트가 발생하면, CPU는 현재 수행하던 일을 중단하고 인터럽트 서비스 루틴을 수행한다**
	* 인터럽트 서비스 루틴(Interrupt Service Routine : ISR) : 운영체제 내부의 코드

---
### 인터럽트 벡터
* 각 인터럽트에는 고유 번호가 할당되어 있다
* 메인 메모리의 지정된 영역에 각 인터럽트를 처리할 코드(ISR)의 시작 주소가 저장된다
	* 인터럽트 벡터 : 인터럽트 서비스 루틴의 시작 주소
	* 인터럽트 벡터 테이블 : 인터럽트 벡터들이 저장되어 있는 영역
* 컴퓨터가 전원이 켜져 부팅될 때, OS는 인터럽트 벡터 테이블 값을 초기화한다
	* 즉, 인터럽트 벡터마다 대응하는 ISR의 주소값을 세팅한다

![캡처](https://user-images.githubusercontent.com/54322066/95018994-d0f0b480-069d-11eb-8892-1829e0c42ae1.PNG)

---
### 인터럽트 처리 과정
* 인터럽트 처리는 먼저 하드웨어적 처리가 수행되고, 다음으로 소프트웨어적 처리가 수행됨
#### 하드웨어적 처리
* 상태 레지스터 값 저장
* 프로세서 모드를 커널 모드로 변경(모드 비트를 변경)
* PC 레지스터 값을 저장
* 발생된 인터럽트의 벡터 값(ISR 주소)을 PC 레지스터에 저장(OS 내의 인터럽트 서비스 루틴을 수행하게 됨)
#### 소프트웨어적 처리 (OS가 수행함)
* CPU 레지스터들의 값을 저장(메모리에 저장)
* 인터럽트 처리 코드를 수행
* CPU 레지스터 값을 복원(저장된 값들을 CPU 레지스터에 load)
* 상태 레지스터 값을 복원(프로세서 모드가 이전 모드로 변경됨)
* PC 레지스터값을 복원(인터럽트가 발생하여 중단된 곳으로 돌아가게 됨)

---
#### 참고
* [System Software & Security Lab @ Myongji Univ. - Operating System ppt]
